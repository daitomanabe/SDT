<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sound Design Toolkit: Fundamental frequency estimator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sound Design Toolkit
   &#160;<span id="projectnumber">080</span>
   </div>
   <div id="projectbrief">Physically informed sound synthesis for everyday sounds</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__pitch.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Fundamental frequency estimator<div class="ingroups"><a class="el" href="group__analysis.html">SDTAnalysis.h: Sound analysis tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab7849d2ed11edd741771623527cad066"><td class="memItemLeft" align="right" valign="top"><a id="gab7849d2ed11edd741771623527cad066"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SDT_PITCH</b>&#160;&#160;&#160;Pitch</td></tr>
<tr class="separator:gab7849d2ed11edd741771623527cad066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5b86281a03dfdd61d03f45875850cfe"><td class="memItemLeft" align="right" valign="top"><a id="gac5b86281a03dfdd61d03f45875850cfe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SDT_PITCH_NEW_ARGS</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:gac5b86281a03dfdd61d03f45875850cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab060934ec4752ead3f627d330570e454"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>SDT_PITCH_ATTRIBUTES</b>(T,  A)</td></tr>
<tr class="separator:gab060934ec4752ead3f627d330570e454"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga93a04dd02784981e8efabae71a248942"><td class="memItemLeft" align="right" valign="top"><a id="ga93a04dd02784981e8efabae71a248942"></a>
typedef struct <a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a></td></tr>
<tr class="memdesc:ga93a04dd02784981e8efabae71a248942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque data structure for a fundamental frequency estimator. <br /></td></tr>
<tr class="separator:ga93a04dd02784981e8efabae71a248942"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga14f1ce31f420c7d3467967c1ada751ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#ga14f1ce31f420c7d3467967c1ada751ab">SDTPitch_new</a> (unsigned int size)</td></tr>
<tr class="memdesc:ga14f1ce31f420c7d3467967c1ada751ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates a fundamental frequency estimator object.  <a href="#ga14f1ce31f420c7d3467967c1ada751ab">More...</a><br /></td></tr>
<tr class="separator:ga14f1ce31f420c7d3467967c1ada751ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2389738427ae0e00c78cccb293683c18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#ga2389738427ae0e00c78cccb293683c18">SDTPitch_free</a> (<a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *x)</td></tr>
<tr class="memdesc:ga2389738427ae0e00c78cccb293683c18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a fundamental frequency estimator instance.  <a href="#ga2389738427ae0e00c78cccb293683c18">More...</a><br /></td></tr>
<tr class="separator:ga2389738427ae0e00c78cccb293683c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac93368f76fb34d20c7f82186b4de2051"><td class="memItemLeft" align="right" valign="top"><a id="gac93368f76fb34d20c7f82186b4de2051"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SDTPitch_setSize</b> (<a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *x, unsigned int f)</td></tr>
<tr class="separator:gac93368f76fb34d20c7f82186b4de2051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09aca4d2a376f801a631b5702af0dbe3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#ga09aca4d2a376f801a631b5702af0dbe3">SDTPitch_setOverlap</a> (<a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *x, double f)</td></tr>
<tr class="memdesc:ga09aca4d2a376f801a631b5702af0dbe3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the analysis window overlapping ratio. Accepted values go from 0.0 to 1.0, with 0.0 meaning no overlap and 1.0 meaning total overlap.  <a href="#ga09aca4d2a376f801a631b5702af0dbe3">More...</a><br /></td></tr>
<tr class="separator:ga09aca4d2a376f801a631b5702af0dbe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33cbcd21ce755f3cfc79ad0131ac7e02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#ga33cbcd21ce755f3cfc79ad0131ac7e02">SDTPitch_setTolerance</a> (<a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *x, double f)</td></tr>
<tr class="memdesc:ga33cbcd21ce755f3cfc79ad0131ac7e02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the peak detection tolerance. Always choosing the greatest NSDF peak as pitch estimation sometimes leads to wrong octave detection errors. To overcome this problem, some tolerance is introduced in the peak detection algorithm. The chosen NSDF peak is the one with lowest frequency among those with value close enough to the global maximum. A value of 0.0 always selects the global maximum, while a value of 1.0 always selects the last NSDF peak.  <a href="#ga33cbcd21ce755f3cfc79ad0131ac7e02">More...</a><br /></td></tr>
<tr class="separator:ga33cbcd21ce755f3cfc79ad0131ac7e02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf5aaf510204ed203896e00aa2e9022d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pitch.html#gacf5aaf510204ed203896e00aa2e9022d">SDTPitch_dsp</a> (<a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *x, double *outs, double in)</td></tr>
<tr class="memdesc:gacf5aaf510204ed203896e00aa2e9022d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal processing routine. Call this function for each sample to perform signal analysis.  <a href="#gacf5aaf510204ed203896e00aa2e9022d">More...</a><br /></td></tr>
<tr class="separator:gacf5aaf510204ed203896e00aa2e9022d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The pitch detection algorithm implemented in this object is discussed in the paper "A smarter way to find pitch" by Philip McLeod and Geoff Wyvill (2005) and it is based on the NSDF (Normalized Squared Differences Function), a close relative of the autocorrelation function. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab060934ec4752ead3f627d330570e454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab060934ec4752ead3f627d330570e454">&#9670;&nbsp;</a></span>SDT_PITCH_ATTRIBUTES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDT_PITCH_ATTRIBUTES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">T, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">A&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">A(T, size, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, Size, size, integer, 1024) \</div><div class="line">A(T, overlap, <span class="keywordtype">double</span>, Overlap, overlap, <span class="keywordtype">double</span>, 0) \</div><div class="line">A(T, tol, <span class="keywordtype">double</span>, Tolerance, tolerance, <span class="keywordtype">double</span>, 0.2)</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacf5aaf510204ed203896e00aa2e9022d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacf5aaf510204ed203896e00aa2e9022d">&#9670;&nbsp;</a></span>SDTPitch_dsp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SDTPitch_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>outs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal processing routine. Call this function for each sample to perform signal analysis. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>Pointer to the instance </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outs</td><td>Pointer to an array of two doubles, containing the algorithm outputs. Array members represent the following information respectively:<ol type="1">
<li>Estimated pitch (Hz),</li>
<li>Pitch clarity [0.0, 1.0]. </li>
</ol>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>Input sample </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if output available (analysis window full), 0 otherwise </dd></dl>

</div>
</div>
<a id="ga2389738427ae0e00c78cccb293683c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2389738427ae0e00c78cccb293683c18">&#9670;&nbsp;</a></span>SDTPitch_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTPitch_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a fundamental frequency estimator instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>Pointer to the instance to destroy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga14f1ce31f420c7d3467967c1ada751ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14f1ce31f420c7d3467967c1ada751ab">&#9670;&nbsp;</a></span>SDTPitch_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a>* SDTPitch_new </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instantiates a fundamental frequency estimator object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the analysis window, in samples </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the new instance </dd></dl>

</div>
</div>
<a id="ga09aca4d2a376f801a631b5702af0dbe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09aca4d2a376f801a631b5702af0dbe3">&#9670;&nbsp;</a></span>SDTPitch_setOverlap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTPitch_setOverlap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the analysis window overlapping ratio. Accepted values go from 0.0 to 1.0, with 0.0 meaning no overlap and 1.0 meaning total overlap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>Pointer to the instance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Overlap ratio [0.0, 1.0] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga33cbcd21ce755f3cfc79ad0131ac7e02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33cbcd21ce755f3cfc79ad0131ac7e02">&#9670;&nbsp;</a></span>SDTPitch_setTolerance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTPitch_setTolerance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pitch.html#ga93a04dd02784981e8efabae71a248942">SDTPitch</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the peak detection tolerance. Always choosing the greatest NSDF peak as pitch estimation sometimes leads to wrong octave detection errors. To overcome this problem, some tolerance is introduced in the peak detection algorithm. The chosen NSDF peak is the one with lowest frequency among those with value close enough to the global maximum. A value of 0.0 always selects the global maximum, while a value of 1.0 always selects the last NSDF peak. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>Pointer to the instance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Pitch estimation tolerance [0.0, 1.0] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
